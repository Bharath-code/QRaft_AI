---
import { ScanLine, Menu, X } from 'lucide-react';
---

<header class="fixed top-0 left-0 right-0 z-50 bg-background border-b-3 border-foreground" id="main-header">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between h-16">
      <!-- Logo -->
      <a href="/" class="flex items-center gap-2" aria-label="QRaft.ai Home">
        <div class="w-8 h-8 bg-primary flex items-center justify-center">
          <span class="text-primary-foreground font-bold">Q</span>
        </div>
        <span class="font-display font-bold text-xl">QRaft<span class="text-primary">.ai</span></span>
      </a>

      <!-- Desktop Nav -->
      <nav class="hidden md:flex items-center gap-8" aria-label="Main navigation">
        <a href="#features" class="brutalist-link font-medium text-sm uppercase tracking-wide">Features</a>
        <a href="#gallery" class="brutalist-link font-medium text-sm uppercase tracking-wide">Gallery</a>
        <a href="#pricing" class="brutalist-link font-medium text-sm uppercase tracking-wide">Pricing</a>
        <a href="#faq" class="brutalist-link font-medium text-sm uppercase tracking-wide">FAQ</a>
      </nav>

      <!-- Desktop CTA -->
      <div class="hidden md:flex items-center gap-4">
        <a href="#waitlist" class="brutalist-btn text-sm">
          Get Early Access
        </a>
      </div>

      <!-- Mobile Menu Button -->
      <button 
        class="md:hidden p-2 border-3 border-foreground" 
        id="mobile-menu-btn"
        aria-label="Toggle menu"
        aria-expanded="false"
        aria-controls="mobile-menu"
      >
        <Menu className="w-5 h-5" id="menu-icon" />
        <X className="w-5 h-5 hidden" id="close-icon" />
      </button>
    </div>
  </div>

  <!-- Mobile Menu Full Screen -->
  <div 
    class="md:hidden fixed inset-0 top-16 bg-background border-t-3 border-foreground transform -translate-y-full opacity-0 transition-all duration-300 pointer-events-none z-40"
    id="mobile-menu"
    aria-hidden="true"
  >
    <nav class="container mx-auto px-4 py-8 flex flex-col gap-6" aria-label="Mobile navigation">
      <a href="#features" class="font-display text-3xl font-bold mobile-nav-link reveal-up reveal-up-1">Features</a>
      <a href="#gallery" class="font-display text-3xl font-bold mobile-nav-link reveal-up reveal-up-2">Gallery</a>
      <a href="#pricing" class="font-display text-3xl font-bold mobile-nav-link reveal-up reveal-up-3">Pricing</a>
      <a href="#faq" class="font-display text-3xl font-bold mobile-nav-link reveal-up reveal-up-4">FAQ</a>
      <a href="#waitlist" class="mt-4 mobile-nav-link reveal-up reveal-up-5">
        <span class="brutalist-btn inline-block text-lg">Get Early Access â†’</span>
      </a>
    </nav>
  </div>
</header>

<script>
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');
  const closeIcon = document.getElementById('close-icon');
  const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
  
  let isMenuOpen = false;

  function toggleMenu() {
    isMenuOpen = !isMenuOpen;
    
    if (isMenuOpen) {
      mobileMenu?.classList.remove('-translate-y-full', 'opacity-0', 'pointer-events-none');
      mobileMenu?.classList.add('translate-y-0', 'opacity-100', 'pointer-events-auto');
      menuIcon?.classList.add('hidden');
      closeIcon?.classList.remove('hidden');
      mobileMenuBtn?.setAttribute('aria-expanded', 'true');
      mobileMenu?.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
    } else {
      mobileMenu?.classList.add('-translate-y-full', 'opacity-0', 'pointer-events-none');
      mobileMenu?.classList.remove('translate-y-0', 'opacity-100', 'pointer-events-auto');
      menuIcon?.classList.remove('hidden');
      closeIcon?.classList.add('hidden');
      mobileMenuBtn?.setAttribute('aria-expanded', 'false');
      mobileMenu?.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    }
  }

  mobileMenuBtn?.addEventListener('click', toggleMenu);
  
  mobileNavLinks.forEach(link => {
    link.addEventListener('click', () => {
      if (isMenuOpen) toggleMenu();
    });
  });
</script>
